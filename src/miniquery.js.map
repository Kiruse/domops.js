{"version":3,"file":"miniquery.js","mappings":"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","sources":["webpack://miniquery/webpack/bootstrap","webpack://miniquery/webpack/runtime/define property getters","webpack://miniquery/webpack/runtime/hasOwnProperty shorthand","webpack://miniquery/./src/miniquery.esm.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","//////////////////////////////////////////////////////////////////////\r\n// A minimalist's interpretation of jQuery for DOM traversal & manipulation.\r\n// -----\r\n// Copyright (c) Kiruse 2021. Licensed under GPL-3.0\r\n\"use strict\";\r\nexport default function $(...args) { return new DocQuery(...args); }\r\nlet docready = false;\r\n$.create = function (tag) {\r\n    return new DocQuery(document.createElement(tag));\r\n};\r\ndocument.addEventListener('DOMContentLoaded', () => docready = true);\r\n$.onready = function (cb) {\r\n    if (docready) {\r\n        cb();\r\n    }\r\n    else {\r\n        document.addEventListener('DOMContentLoaded', cb);\r\n    }\r\n};\r\nexport class ArgumentError extends Error {\r\n}\r\nexport class DocQuery {\r\n    selector;\r\n    relative;\r\n    elements;\r\n    length;\r\n    constructor(...args) {\r\n        if (args.length === 0)\r\n            throw new ArgumentError('no arguments passed');\r\n        if (Array.isArray(args[0])) {\r\n            this.relative = [];\r\n            this.elements = args[0];\r\n        }\r\n        else {\r\n            if (typeof (args[0]) === 'string') {\r\n                this.selector = args[0];\r\n                if (args.length < 2)\r\n                    this.relative = [document];\r\n                else\r\n                    this.relative = unique(ensureArray(args[1]));\r\n                if (!Array.isArray(this.relative))\r\n                    this.relative = [this.relative];\r\n                this.elements = DocQuery._query(this.selector, this.relative);\r\n            }\r\n            else {\r\n                this.relative = [];\r\n                this.elements = args;\r\n            }\r\n        }\r\n        for (let i = 0; i < this.elements.length; ++i) {\r\n            this[i] = this.elements[i];\r\n        }\r\n        this.length = this.elements.length;\r\n    }\r\n    /**\r\n     * Descend further down the DOM of each element in the current selection filtering for children matching the given selector.\r\n     * @see HTMLElement.querySelectorAll\r\n     * @param selector new selector to apply\r\n     * @returns new DocQuery containing all matching elements\r\n     */\r\n    query(selector) {\r\n        return new DocQuery(selector, this.elements);\r\n    }\r\n    /**\r\n     * Isolate a single element from the current selection.\r\n     * @param index of the element of the current selection to isolate\r\n     * @returns new DocQuery containing only the indexed element\r\n     */\r\n    at(...indices) {\r\n        if (indices.length === 0)\r\n            return [];\r\n        return new DocQuery(...indices.map(i => this.elements[i]).filter(e => !!e));\r\n    }\r\n    /**\r\n     * Isolate every nth element of the current selection in a new selection.\r\n     * @param n distance between elements\r\n     * @returns new DocQuery containing only every nth element\r\n     */\r\n    nth(n) {\r\n        return new DocQuery(...this.elements.filter((_, i) => i % n === 0));\r\n    }\r\n    attr(...args) {\r\n        if (args.length === 0)\r\n            throw new ArgumentError('no arguments');\r\n        if (args.length === 1) {\r\n            if (typeof (args[0]) === 'object')\r\n                return this._attr_obj(args[0]);\r\n            else\r\n                return this._attr_get(args[0]);\r\n        }\r\n        else {\r\n            return this._attr_set(args[0], args[1]);\r\n        }\r\n    }\r\n    _attr_get(name) {\r\n        return this.elements.map(e => e.getAttribute(name));\r\n    }\r\n    _attr_set(name, value) {\r\n        this.elements.forEach(e => e.setAttribute(name, value));\r\n        return this;\r\n    }\r\n    _attr_obj(props) {\r\n        for (let prop in props) {\r\n            if (props.hasOwnProperty(prop)) {\r\n                this._attr_set(prop, props[prop]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    data(...args) {\r\n        if (args.length === 0)\r\n            throw new ArgumentError('no arguments');\r\n        if (args.length === 1) {\r\n            if (typeof (args[0]) === 'object')\r\n                return this._data_obj(args[0]);\r\n            else\r\n                return this._attr_get('data-' + args[0]);\r\n        }\r\n        else {\r\n            return this._attr_set('data-' + args[0], args[1]);\r\n        }\r\n    }\r\n    _data_obj(props) {\r\n        for (let attr in props) {\r\n            if (props.hasOwnProperty(attr)) {\r\n                this._attr_set('data-' + attr, props[attr]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    text(arg) {\r\n        if (arg === undefined) {\r\n            return this.elements.map(e => e.innerText);\r\n        }\r\n        if (typeof (arg) === 'function') {\r\n            for (let i = 0; i < this.elements.length; ++i) {\r\n                this.elements[i].innerText = arg(this.elements[i], i, this.elements);\r\n            }\r\n            return this;\r\n        }\r\n        else {\r\n            this.elements.forEach(el => el.innerText = arg);\r\n            return this;\r\n        }\r\n    }\r\n    html(arg) {\r\n        if (arg === undefined) {\r\n            return this.elements.map(e => e.innerHTML);\r\n        }\r\n        if (typeof (arg) === 'function') {\r\n            for (let i = 0; i < this.elements.length; ++i) {\r\n                this.elements[i].innerHTML = arg(this.elements[i], i, this.elements);\r\n            }\r\n            return this;\r\n        }\r\n        else {\r\n            this.elements.forEach(el => el.innerHTML = arg);\r\n            return this;\r\n        }\r\n    }\r\n    style(...args) {\r\n        if (args.length === 0)\r\n            throw new ArgumentError('no arguments');\r\n        if (args.length === 1) {\r\n            if (typeof (args[0]) === 'object')\r\n                return this._style_obj(args[0]);\r\n            else\r\n                return this._style_get(args[0]);\r\n        }\r\n        else {\r\n            return this._style_set(args[0], args[1]);\r\n        }\r\n    }\r\n    _style_get(name) {\r\n        return this.elements.map(e => getComputedStyle(e)[name]);\r\n    }\r\n    _style_set(name, value) {\r\n        this.elements.forEach((e) => e.style[name] = value); // for some reason TypeScript is unaware of style property\r\n        return this;\r\n    }\r\n    _style_obj(props) {\r\n        for (let prop in props) {\r\n            if (props.hasOwnProperty(prop)) {\r\n                this._style_set(prop, props[prop]);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    addClass(...classes) {\r\n        this.elements.forEach(e => e.classList.add(...classes));\r\n        return this;\r\n    }\r\n    removeClass(...classes) {\r\n        this.elements.forEach(e => e.classList.remove(...classes));\r\n        return this;\r\n    }\r\n    hasClass(cls) {\r\n        return this.elements.map(e => e.classList.contains(cls));\r\n    }\r\n    on(evt, handler) {\r\n        const events = evt.split(/\\s+/);\r\n        for (let elem of this.elements) {\r\n            for (let event of events) {\r\n                elem.addEventListener(event, handler);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    forEach(cb) {\r\n        this.elements.forEach(cb);\r\n        return this;\r\n    }\r\n    /**\r\n     * Attach every element in the current selection to the given parent element.\r\n     * @param parent parent element to attach to\r\n     * @returns this selection\r\n     */\r\n    attachTo(parent) {\r\n        if (parent instanceof DocQuery) {\r\n            parent = parent[0];\r\n        }\r\n        this.elements.forEach(e => parent.appendChild(e));\r\n        return this;\r\n    }\r\n    /**\r\n     * Attach given children to the current selection's first element.\r\n     * @note elements can only be parented to at most one element, thus attaching to all elements in the selection is impossible.\r\n     * @note if the selection is empty, given children will be detached from the entire document instead\r\n     * @param children to attach\r\n     * @return this selection\r\n     */\r\n    attach(...children) {\r\n        if (this.elements.length === 0) {\r\n            children.forEach(child => child.parentElement.removeChild(child));\r\n        }\r\n        else {\r\n            children.forEach(child => this.elements[0].appendChild(child));\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Detach the current selection from their parent elements.\r\n     * @note The elements in this selection will be effectively removed from the DOM until reattached.\r\n     * @see attach, attachTo\r\n     * @returns this selection\r\n     */\r\n    detach() {\r\n        for (let el of this.elements) {\r\n            el.parentElement.removeChild(el);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Detach all children from the elements of the current selection.\r\n     * @returns this selection\r\n     */\r\n    empty() {\r\n        for (let el of this.elements) {\r\n            for (let child of el.children) {\r\n                el.removeChild(child);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    static _query(selector, relative) {\r\n        return relative.map(r => [...r.querySelectorAll(selector)]).flat(1);\r\n    }\r\n}\r\nfunction unique(arr) {\r\n    for (let i = 0; i < arr.length; ++i) {\r\n        for (let j = i + 1; j < arr.length;) {\r\n            if (arr[i] === arr[j]) {\r\n                arr.splice(j, 1);\r\n                continue;\r\n            }\r\n            else {\r\n                ++j;\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\nconst ensureArray = x => Array.isArray(x) ? x : [x];\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","$","args","DocQuery","docready","create","tag","document","createElement","addEventListener","onready","cb","ArgumentError","Error","selector","relative","elements","length","constructor","Array","isArray","this","arr","i","j","splice","unique","ensureArray","_query","query","at","indices","map","filter","e","nth","n","_","attr","_attr_obj","_attr_get","_attr_set","name","getAttribute","value","forEach","setAttribute","props","data","_data_obj","text","arg","undefined","innerText","el","html","innerHTML","style","_style_obj","_style_get","_style_set","getComputedStyle","addClass","classes","classList","add","removeClass","remove","hasClass","cls","contains","on","evt","handler","events","split","elem","event","attachTo","parent","appendChild","attach","children","child","parentElement","removeChild","detach","empty","r","querySelectorAll","flat","x"],"sourceRoot":""}